---
import { Image } from "astro:assets";
import FormattedDate from "@components/FormattedDate.astro";
import config from "@config/config.json";
import { slugify } from "@utils/slug";

const { posts } = Astro.props;

type PostType = {
  id: string;
  slug: string;
  body: string;
  collection: string;
  data: {
    title: string;
    description: string;
    heroImage: string;
    pubDate: Date;
    categories: string[];
    tags: string[];
    autors: string[];
  };
};


const totemPage = {
  slug: "totems",
  data: {
    title: "Mapa de Ubicación Totems de Activación TNE",
    description: "Descubre las Ubicaciones de los Totems disponibles en el metro de santiago para validar o revalidad tu TNE.",
    heroImage: "/totem.jpg", 
    pubDate: new Date(),
    categories: []
  }
};

const ExploradorCampus = {
  slug: "ExploradorCampus",
  data: {
    title: "Explorador Campus USACH",
    description: "Explora todo el campo de la USACH y descubre donde encontrar salas, baños, accesos entre otros puntos de interés",
    heroImage: "/salas.jpg", 
    pubDate: new Date(),
    categories: []
  }
};

const Codecove = {
  slug: "Codecove",
  data: {
    title: "Codecove: Practica Programación",
    description: "Mejora tus habilidades de programación con ejercicios interactivos y retroalimentación instantánea.",
    heroImage: "/codecove.png",
    pubDate: new Date(),
    categories: []
  }
};
---




<div
  class="mx-auto grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-10 lg:mx-0 lg:max-w-none lg:grid-cols-3 xl:gap-x-10"
>
  {/* Luego renderizamos la página de Buscador de Salas */}
  <article class="group flex w-full flex-col bg-white dark:bg-zinc-800/50 rounded-2xl overflow-hidden shadow-md hover:shadow-2xl hover:shadow-orange-500/20 transition-all duration-300 hover:-translate-y-2 border border-zinc-100 dark:border-zinc-700/50">
    <div class="relative overflow-hidden aspect-[4/3] bg-zinc-100 dark:bg-zinc-900">
      {ExploradorCampus.data.heroImage && (
        <a href={`/ExploradorCampus`} class="block h-full">
          <Image
            class="w-full h-full object-cover transition duration-500 ease-in-out group-hover:scale-110 group-hover:brightness-105"
            src={ExploradorCampus.data.heroImage}
            alt={ExploradorCampus.data.title}
            width={960}
            height={480}
            decoding="async"
            loading="lazy"
          />
        </a>
      )}
    </div>
    <div class="flex flex-col flex-1 p-6">
      <div class="flex items-center gap-3 mb-4 flex-wrap">
        <time class="text-xs font-medium text-zinc-500 dark:text-zinc-400 tracking-wide">
          <FormattedDate date={ExploradorCampus.data.pubDate} />
        </time>
        {ExploradorCampus.data.categories.map((item) => (
          <a
            href={`/categories/${slugify(item)}`}
            class="inline-flex items-center text-xs font-semibold px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-sm"
          >
            {item}
          </a>
        ))}
      </div>
      <div class="flex-1">
        <h2 class="text-xl font-bold leading-snug text-zinc-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-400 mb-3">
          <a href={`/ExploradorCampus`} class="hover:underline decoration-2 underline-offset-4">
            {ExploradorCampus.data.title}
          </a>
        </h2>
        <p class="text-sm leading-relaxed text-zinc-600 dark:text-zinc-300 line-clamp-3">
          {ExploradorCampus.data.description}
        </p>
      </div>
    </div>
  </article>

  {/* Tarjeta para Codecove */}
  <article class="group flex w-full flex-col bg-white dark:bg-zinc-800/50 rounded-2xl overflow-hidden shadow-md hover:shadow-2xl hover:shadow-orange-500/20 transition-all duration-300 hover:-translate-y-2 border border-zinc-100 dark:border-zinc-700/50">
    <div class="relative overflow-hidden aspect-[4/3] bg-zinc-100 dark:bg-zinc-900">
      {Codecove.data.heroImage && (
        <a href={`/Codecove`} class="block h-full">
          <Image
            class="w-full h-full object-cover transition duration-500 ease-in-out group-hover:scale-110 group-hover:brightness-105"
            src={Codecove.data.heroImage}
            alt={Codecove.data.title}
            width={960}
            height={480}
            decoding="async"
            loading="lazy"
          />
        </a>
      )}
    </div>
    <div class="flex flex-col flex-1 p-6">
      <div class="flex items-center gap-3 mb-4 flex-wrap">
        <time class="text-xs font-medium text-zinc-500 dark:text-zinc-400 tracking-wide">
          <FormattedDate date={Codecove.data.pubDate} />
        </time>
        {Codecove.data.categories.map((item) => (
          <a
            href={`/categories/${slugify(item)}`}
            class="inline-flex items-center text-xs font-semibold px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-sm"
          >
            {item}
          </a>
        ))}
      </div>
      <div class="flex-1">
        <h2 class="text-xl font-bold leading-snug text-zinc-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-400 mb-3">
          <a href={`/Codecove`} class="hover:underline decoration-2 underline-offset-4">
            {Codecove.data.title}
          </a>
        </h2>
        <p class="text-sm leading-relaxed text-zinc-600 dark:text-zinc-300 line-clamp-3">
          {Codecove.data.description}
        </p>
      </div>
    </div>
  </article>

  {/* Primero renderizamos la página de Totems */}
  <article class="group flex w-full flex-col bg-white dark:bg-zinc-800/50 rounded-2xl overflow-hidden shadow-md hover:shadow-2xl hover:shadow-orange-500/20 transition-all duration-300 hover:-translate-y-2 border border-zinc-100 dark:border-zinc-700/50">
    <div class="relative overflow-hidden aspect-[4/3] bg-zinc-100 dark:bg-zinc-900">
      {totemPage.data.heroImage && (
        <a href={`/Totems/`} class="block h-full">
          <Image
            class="w-full h-full object-cover transition duration-500 ease-in-out group-hover:scale-110 group-hover:brightness-105"
            src={totemPage.data.heroImage}
            alt={totemPage.data.title}
            width={960}
            height={480}
            decoding="async"
            loading="lazy"
          />
        </a>
      )}
    </div>
    <div class="flex flex-col flex-1 p-6">
      <div class="flex items-center gap-3 mb-4 flex-wrap">
        <time class="text-xs font-medium text-zinc-500 dark:text-zinc-400 tracking-wide">
          <FormattedDate date={totemPage.data.pubDate} />
        </time>
        {totemPage.data.categories.map((item) => (
          <a
            href={`/categories/${slugify(item)}`}
            class="inline-flex items-center text-xs font-semibold px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-sm"
          >
            {item}
          </a>
        ))}
      </div>
      <div class="flex-1">
        <h2 class="text-xl font-bold leading-snug text-zinc-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-400 mb-3">
          <a href={`/totems/`} class="hover:underline decoration-2 underline-offset-4">
            {totemPage.data.title}
          </a>
        </h2>
        <p class="text-sm leading-relaxed text-zinc-600 dark:text-zinc-300 line-clamp-3">
          {totemPage.data.description}
        </p>
      </div>
    </div>
  </article>

  {/* Luego renderizamos los posts normales */}
  {
    posts?.map((post: PostType) => (
      <article class="group flex w-full flex-col bg-white dark:bg-zinc-800/50 rounded-2xl overflow-hidden shadow-md hover:shadow-2xl hover:shadow-orange-500/20 transition-all duration-300 hover:-translate-y-2 border border-zinc-100 dark:border-zinc-700/50">
        <div class="relative overflow-hidden aspect-[4/3] bg-zinc-100 dark:bg-zinc-900">
          {post.data.heroImage && (
            <a href={`/blog/${post.slug}/`} class="block h-full">
              <Image
                class="w-full h-full object-cover transition duration-500 ease-in-out group-hover:scale-110 group-hover:brightness-105"
                src={post.data.heroImage}
                alt={post.data.title}
                width={1800}
                height={800}
                decoding="async"
                loading="lazy"
              />
            </a>
          )}
        </div>
        <div class="flex flex-col flex-1 p-6">
          <div class="flex items-center gap-3 mb-4 flex-wrap">
            <time class="text-xs font-medium text-zinc-500 dark:text-zinc-400 tracking-wide">
              <FormattedDate date={post.data.pubDate} />
            </time>
            {post.data.categories.slice(0, 2).map((item) => (
              <a
                href={`/categories/${slugify(item)}`}
                class="inline-flex items-center text-xs font-semibold px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-sm"
              >
                {item}
              </a>
            ))}
          </div>
          <div class="flex-1">
            <h2 class="text-xl font-bold leading-snug text-zinc-900 dark:text-white group-hover:text-orange-600 dark:group-hover:text-orange-400 mb-3">
              <a href={`/blog/${post.slug}/`} class="hover:underline decoration-2 underline-offset-4">
                {post.data.title}
              </a>
            </h2>
            <p class="text-sm leading-relaxed text-zinc-600 dark:text-zinc-300 line-clamp-3">
              {post.data.description}
            </p>
          </div>
        </div>
      </article>
    ))
  }
</div>